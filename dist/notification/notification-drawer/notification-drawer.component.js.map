{"version":3,"sources":["../../../build/src/app/notification/notification-drawer/notification-drawer.component.ts"],"names":[],"mappings":"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","file":"notification-drawer.component.js","sourceRoot":"","sourcesContent":["import {\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewEncapsulation,\n} from '@angular/core';\n\nimport { EmptyStateConfig } from '../../empty-state/empty-state-config';\nimport { NotificaitonGroup } from '../notification-group';\n\nimport { filter, get, size } from 'lodash';\n\n/**\n * Notification drawer component\n *\n * This provides a common mechanism to handle how the notification drawer should look and behave without mandating\n * the look of the notification group heading or notification body.\n *\n * Usage:\n * <code><pre>\n * // Individual module import\n * import { NotificationDrawerModule } from 'patternfly-ng/notification';\n * // Or\n * import { NotificationDrawerModule } from 'patternfly-ng';\n *\n * &#64;NgModule({\n *   imports: [NotificationDrawerModule,...]\n * })\n * export class AppModule(){}\n * </pre></code>\n *\n * Optional:\n * <code><pre>\n * import { Notification, NotificationGroup } from 'patternfly-ng/notification';\n * </pre></code>\n */\n\nexport class NotificationDrawerComponent implements OnInit {\n  /**\n   * Flag if the drawer can be expanded. Optional, default: false\n   */\n   allowExpand: boolean = false;\n\n  /**\n   * Flag if the drawer is expanded (only valid if allowExpand is true). Optional, default: false\n   */\n   expanded: boolean = false;\n\n  /**\n   * Template for the heading area for each notification group,\n   *  access the group via notificationGroup\n   */\n   headingTemplate: TemplateRef<any>;\n\n  /**\n   * Flag if the drawer is currently hidden\n   */\n   hidden: boolean;\n\n  /**\n   * Text to show when there are no notifications. Optional.\n   */\n   noNotificationsText: string;\n\n  /**\n   * Template for the notification body for each notification,\n   * access the notification via notification\n   */\n   notificationBodyTemplate: TemplateRef<any>;\n\n  /**\n   * Template for the notification footer for each notification,\n   * access the notification via notification\n   */\n   notificationFooterTemplate: TemplateRef<any>;\n\n  /**\n   * Collection notification groups to add to the drawer. Alternatively, a single group object\n   * can be given if categorization is not used.\n   */\n   notificationGroups: NotificaitonGroup[];\n\n  /**\n   * Optional field from the notifications to use to track by in the notifications listing ($index used otherwise).\n   */\n   notificationTrackField: string;\n\n  /**\n   * Flag if the mark all read button should be shown, optional, default is false\n   */\n   showMarkAllRead: boolean = false;\n\n  /**\n   * Flag if the clear all button should be shown, optional, default is false\n   */\n   showClearAll: boolean;\n\n  /**\n   * Boolean flag if size of group less 2\n   */\n   singleGroup: boolean;\n\n  /**\n   * Template for the sub-heading area for each notification group,\n   * access the group via notificationGroup\n   */\n   subHeadingTemplate: TemplateRef<any>;\n\n  /**\n   * Title to display for the drawer (leaving this blank will remove the provided expand capability)\n   */\n   title: string;\n\n  /**\n   * Template for the title area for the notification drawer, use this\n   * to customize the drawer title area\n   */\n   titleTemplate: TemplateRef<any>;\n\n  /**\n   * Event emitter when close icon clicked\n   */\n   close = new EventEmitter<boolean>();\n\n  /**\n   * Event emitter when mark all button clicked\n   */\n   unreadNotifications = new EventEmitter<boolean>();\n\n  /**\n   * A config containing properties for empty state when no notification are available\n   */\n  private emptyStateConfig?: EmptyStateConfig;\n\n  /**\n   * count read count\n   */\n  private markreadCount: number;\n\n  /**\n   * count unread notifications\n   */\n  private unreadCount: number;\n\n  // Initialization\n\n  /**\n   * The default constructor\n   */\n  constructor() {}\n\n  /**\n   * Setup component configuration upon initialization\n   */\n  ngOnInit(): void {\n    this.collapseOpenGroups();\n    this.singleGroup = size(this.notificationGroups) < 2;\n    this.markreadCount = 0;\n    this.setEmptyConfig();\n    this.readCountConfig();\n  }\n\n  // Actions\n\n  /**\n   *  Return boolean if group has notifications\n   *  @param group\n   */\n  hasNotifications(group: NotificaitonGroup[]): boolean {\n    return size(get(group, 'notifications')) > 0;\n  }\n\n  /**\n   *  Return boolean if group has unread notifications\n   *  @param group\n   */\n  hasUnread(group: NotificaitonGroup): boolean {\n    return size(filter(get(group, 'notifications'), { 'isViewing': false })) > 0;\n  }\n\n  /**\n   * method for the close button, emits event with clicked over close icon\n   *\n   */\n  onClose(): void {\n    this.hidden = true;\n    this.close.emit(this.hidden);\n  }\n\n  /**\n   * Method for the mark all read button (Optional)\n   * @param group\n   */\n  onMarkAllRead(group: NotificaitonGroup): void {\n    group.notifications.forEach(n => n.isViewing = true);\n    this.updateReadCount();\n  }\n\n  /**\n   *  Method for the clear all button (Optional)\n   *  @param group\n   */\n  onClearAll(group: NotificaitonGroup): void {\n    group.notifications = null;\n    group.subHeading = '0 New Events';\n  }\n\n  /**\n   *  Toggle to show / hide drawer\n   *  @param group\n   */\n  toggleCollapse(group: NotificaitonGroup): void {\n    if (group.open) {\n      group.open = false;\n    } else {\n      this.collapseOpenGroups();\n      group.open = true;\n    }\n  }\n\n  /**\n   * Toggle to expand the drawer\n   */\n  toggleExpandDrawer(): void {\n    if (this.allowExpand)\n      this.expanded = !this.expanded;\n  }\n\n  // Private\n\n  /**\n   * Collapse panel for all groups\n   */\n  private collapseOpenGroups(): void {\n    this.notificationGroups.forEach(grp => grp.open = false);\n  }\n\n  /**\n   * Emit event during the inital load based on total unread notification\n   */\n  private readCountConfig(): void {\n    this.unreadCount = this.totalUnreadNotifications(this.notificationGroups);\n    if (this.unreadCount > 0) {\n      this.unreadNotifications.emit(true);\n    } else {\n      this.unreadNotifications.emit(false);\n    }\n  }\n\n  /**\n   * Empty config setup\n   */\n  private setEmptyConfig(): void {\n    this.emptyStateConfig = {\n      iconStyleClass: 'pficon-info',\n      title: this.noNotificationsText || this.noNotificationsText || 'There are no notifications to display.'\n    };\n  }\n\n  /**\n   * Total number of unread notifications\n   * @param groups\n   */\n  private totalUnreadNotifications(groups: NotificaitonGroup[]): number {\n    return size(filter(\n      groups.map(g => filter(get(g, 'notifications'), { 'isViewing': false }).length > 0),\n      o => { return o === true; }));\n  }\n\n  /**\n   * Emit event when no unread notifications are remains\n   */\n  private updateReadCount(): void {\n    this.markreadCount = this.markreadCount + 1;\n    if (this.markreadCount === this.unreadCount) {\n      this.unreadNotifications.emit(false);\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  encapsulation: ViewEncapsulation.None,\n  selector: 'pfng-notification-drawer',\n  template: `<div class=\"drawer-pf\" [ngClass]=\"{'hide': hidden, 'drawer-pf-expanded': expanded}\"><div *ngIf=\"title\" class=\"drawer-pf-title\"><a *ngIf=\"allowExpand\" class=\"drawer-pf-toggle-expand fa fa-angle-double-left hidden-xs\" (click)=\"toggleExpandDrawer()\"></a> <a class=\"drawer-pf-close pficon pficon-close\" (click)=\"onClose()\"></a><div *ngIf=\"titleTemplate; then showTitleTemplate else showTitle\"></div><ng-template #showTitle><h3 class=\"text-center\">{{title}}</h3></ng-template><ng-template #showTitleTemplate [ngTemplateOutlet]=\"titleTemplate\"></ng-template></div><div *ngIf=\"!notificationGroups\"><pfng-empty-state [config]=\"emptyStateConfig\"></pfng-empty-state></div><div *ngIf=\"notificationGroups\" class=\"panel-group\"><div class=\"panel panel-default\" [ngClass]=\"{expanded: notificationGroup.open}\" *ngFor=\"let notificationGroup of notificationGroups, let index = index\"><div class=\"panel-heading\"><h4 class=\"panel-title\"><a *ngIf=\"!singleGroup\" (click)=\"toggleCollapse(notificationGroup)\" [ngClass]=\"{collapsed: !notificationGroup.open}\"><span><ng-template let-group=\"notificationGroup\" let-index=\"index\" [ngTemplateOutlet]=\"headingTemplate\" [ngTemplateOutletContext]=\"{group:notificationGroup, index: index}\"></ng-template></span></a></h4><ng-template class=\"panel-counter\" let-group=\"notificationGroup\" let-index=\"index\" [ngTemplateOutlet]=\"subHeadingTemplate\" [ngTemplateOutletContext]=\"{group:notificationGroup, index: index}\"></ng-template></div><div class=\"panel-collapse collapse\" [ngClass]=\"{in: notificationGroup.open || notificationGroups.length === 1}\"><div *ngIf=\"hasNotifications(notificationGroup)\" class=\"panel-body\"><div class=\"drawer-pf-notification\" [ngClass]=\"{unread: !notification.isViewing, 'expanded-notification': expanded}\" *ngFor=\"let notification of notificationGroup.notifications trackBy notificationTrackField, let index = index\"><ng-template let-notify=\"notification\" let-index=\"index\" [ngTemplateOutlet]=\"notificationBodyTemplate\" [ngTemplateOutletContext]=\"{notify:notification, index: index}\"></ng-template></div><div *ngIf=\"notificationGroup.loading\" class=\"drawer-pf-loading text-center\"><span class=\"spinner spinner-xs spinner-inline\"></span> Loading More</div></div><div *ngIf=\"(showClearAll || showMarkAllRead) && hasNotifications(notificationGroup)\" class=\"drawer-pf-action\"><span class=\"drawer-pf-action-link\" *ngIf=\"showMarkAllRead && hasUnread(notificationGroup)\"><button class=\"btn btn-link\" (click)=\"onMarkAllRead(notificationGroup)\">Mark All Read</button> </span><span class=\"drawer-pf-action-link\"><button class=\"btn btn-link\" *ngIf=\"showClearAll\" (click)=\"onClearAll(notificationGroup)\"><span class=\"pficon pficon-close\"></span> Clear All</button></span></div><div *ngIf=\"!hasNotifications(notificationGroup)\"><div class=\"panel-body\"><pfng-empty-state [config]=\"notificationGroup.emptyStateConfig\"></pfng-empty-state></div></div><ng-template *ngIf=\"notificationFooterTemplate\" [ngTemplateOutlet]=\"notificationFooterTemplate\"></ng-template></div></div></div></div>`\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'allowExpand': [{ type: Input },],\n'expanded': [{ type: Input },],\n'headingTemplate': [{ type: Input },],\n'hidden': [{ type: Input },],\n'noNotificationsText': [{ type: Input },],\n'notificationBodyTemplate': [{ type: Input },],\n'notificationFooterTemplate': [{ type: Input },],\n'notificationGroups': [{ type: Input },],\n'notificationTrackField': [{ type: Input },],\n'showMarkAllRead': [{ type: Input },],\n'showClearAll': [{ type: Input },],\n'singleGroup': [{ type: Input },],\n'subHeadingTemplate': [{ type: Input },],\n'title': [{ type: Input },],\n'titleTemplate': [{ type: Input },],\n'close': [{ type: Output, args: ['close', ] },],\n'unreadNotifications': [{ type: Output, args: ['unreadNotifications', ] },],\n};\n}\n\n\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}